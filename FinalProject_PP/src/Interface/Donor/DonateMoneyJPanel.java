/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package Interface.Donor;

import Business.Country.Country;
import Business.District.District;
import Business.EcoSystem;
import Business.Person.Person;
import Business.UserAccount.UserAccount;
import Business.WorkQueue.WorkRequest;
import java.text.SimpleDateFormat;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

/**
 *
 * @author jiahuanli
 */
public class DonateMoneyJPanel extends javax.swing.JPanel {

    /**
     * Creates new form DonateMoneyJPanel
     */
    JPanel donorContainer;
    UserAccount account;
    EcoSystem system;

    public DonateMoneyJPanel(JPanel donorContainer, UserAccount account, EcoSystem system) {
        initComponents();
        this.donorContainer = donorContainer;
        this.account = account;
        this.system = system;

        lblDonorName.setText(account.getPerson().getName());
        lblAccountName.setText(account.getUsername());

        populateCbxCountryCountry();
        populateCbxDistrictCountry();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        lblDonor = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        lblCountry = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        btnDonateCountry = new javax.swing.JButton();
        jLabel5 = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        lblDonorName = new javax.swing.JLabel();
        lblAccountName = new javax.swing.JLabel();
        cbxCountryCountry = new javax.swing.JComboBox();
        cbxDistrictDistrict = new javax.swing.JComboBox();
        txtCountryQuantity = new javax.swing.JTextField();
        jLabel1 = new javax.swing.JLabel();
        btnDonateDistrict = new javax.swing.JButton();
        jLabel3 = new javax.swing.JLabel();
        cbxDistrictCountry = new javax.swing.JComboBox();
        lblCountry1 = new javax.swing.JLabel();
        jLabel7 = new javax.swing.JLabel();
        txtDistrictQuantity = new javax.swing.JTextField();

        setBackground(new java.awt.Color(255, 255, 255));

        lblDonor.setText("Donor:");

        jLabel2.setText("UserAccount:");

        lblCountry.setText("Country:");

        jLabel4.setText("District:");

        btnDonateCountry.setText("Donate");
        btnDonateCountry.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnDonateCountryActionPerformed(evt);
            }
        });

        jLabel5.setFont(new java.awt.Font("Lucida Grande", 0, 24)); // NOI18N
        jLabel5.setText("Donate money");

        jLabel6.setText("Money:");

        lblDonorName.setText("Donor Name");
        lblDonorName.setEnabled(false);

        lblAccountName.setText("User Account");
        lblAccountName.setEnabled(false);

        cbxCountryCountry.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cbxCountryCountryActionPerformed(evt);
            }
        });

        cbxDistrictDistrict.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cbxDistrictDistrictActionPerformed(evt);
            }
        });

        txtCountryQuantity.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtCountryQuantityActionPerformed(evt);
            }
        });

        jLabel1.setText("Donate To Country");

        btnDonateDistrict.setText("Donate");
        btnDonateDistrict.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnDonateDistrictActionPerformed(evt);
            }
        });

        jLabel3.setText("Donate To District");

        cbxDistrictCountry.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cbxDistrictCountryActionPerformed(evt);
            }
        });

        lblCountry1.setText("Country:");

        jLabel7.setText("Money:");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addGap(60, 60, 60)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jLabel3)
                        .addGap(18, 18, 18)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(lblCountry1)
                            .addComponent(jLabel4)
                            .addComponent(jLabel7))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                .addComponent(cbxDistrictDistrict, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.PREFERRED_SIZE, 103, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(cbxDistrictCountry, javax.swing.GroupLayout.PREFERRED_SIZE, 106, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(layout.createSequentialGroup()
                                .addGap(3, 3, 3)
                                .addComponent(txtDistrictQuantity, javax.swing.GroupLayout.PREFERRED_SIZE, 167, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(btnDonateDistrict, javax.swing.GroupLayout.PREFERRED_SIZE, 259, javax.swing.GroupLayout.PREFERRED_SIZE)))
                        .addGap(0, 0, Short.MAX_VALUE))
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jLabel1)
                        .addGap(18, 18, 18)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(lblCountry)
                            .addComponent(jLabel6))
                        .addGap(18, 18, 18)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(cbxCountryCountry, javax.swing.GroupLayout.PREFERRED_SIZE, 106, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(layout.createSequentialGroup()
                                .addComponent(txtCountryQuantity, javax.swing.GroupLayout.PREFERRED_SIZE, 155, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(btnDonateCountry, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))))
                .addGap(79, 79, 79))
            .addGroup(layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel2)
                            .addComponent(lblDonor))
                        .addGap(24, 24, 24)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(lblDonorName)
                            .addComponent(lblAccountName)))
                    .addComponent(jLabel5))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(42, 42, 42)
                .addComponent(jLabel5)
                .addGap(41, 41, 41)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblDonor)
                    .addComponent(lblDonorName))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel2)
                    .addComponent(lblAccountName))
                .addGap(47, 47, 47)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel1)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(layout.createSequentialGroup()
                            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                .addComponent(lblCountry)
                                .addComponent(cbxCountryCountry, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                .addComponent(txtCountryQuantity, javax.swing.GroupLayout.PREFERRED_SIZE, 44, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(jLabel6)))
                        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                            .addGap(39, 39, 39)
                            .addComponent(btnDonateCountry, javax.swing.GroupLayout.PREFERRED_SIZE, 44, javax.swing.GroupLayout.PREFERRED_SIZE))))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 99, Short.MAX_VALUE)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel3)
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(lblCountry1)
                            .addComponent(cbxDistrictCountry, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(layout.createSequentialGroup()
                                .addGap(16, 16, 16)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                    .addComponent(jLabel4)
                                    .addComponent(cbxDistrictDistrict, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                            .addGroup(layout.createSequentialGroup()
                                .addGap(51, 51, 51)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                    .addComponent(txtDistrictQuantity, javax.swing.GroupLayout.PREFERRED_SIZE, 44, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(jLabel7)
                                    .addComponent(btnDonateDistrict, javax.swing.GroupLayout.PREFERRED_SIZE, 44, javax.swing.GroupLayout.PREFERRED_SIZE))))))
                .addGap(50, 50, 50))
        );
    }// </editor-fold>//GEN-END:initComponents
    public void populateCbxCountryCountry() {
        cbxCountryCountry.removeAllItems();
        for (Country country : system.getCountryList()) {
            cbxCountryCountry.addItem(country);
        }
    }

    public void populateCbxDistrictCountry() {
        cbxDistrictCountry.removeAllItems();
        for (Country country : system.getCountryList()) {
            cbxDistrictCountry.addItem(country);
        }
    }

    public void populateCbxDistrict(Country country) {
        cbxDistrictDistrict.removeAllItems();
        for (District district : country.getDistrictDirectory().getDistrictList()) {
            cbxDistrictDistrict.addItem(district);
        }
    }
    private void btnDonateCountryActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnDonateCountryActionPerformed
        Country country=(Country)cbxCountryCountry.getSelectedItem();
        Double quantityCountry = Double.parseDouble(txtCountryQuantity.getText());
       
        if(country.getMoney()==null){
        country.setMoney(quantityCountry);
        }else{
        country.setMoney(country.getMoney()+quantityCountry);
        }
        WorkRequest workRequest = new WorkRequest();
        workRequest.setSender(account);
        if(workRequest.getMoney()==null){
        workRequest.setMoney(quantityCountry);
        }
        workRequest.setDestination(((Country) cbxCountryCountry.getSelectedItem()).getName());
        system.getWorkQueue().getWorkRequestList().add(workRequest);

        JOptionPane.showMessageDialog(null, "Donate To Country Successfully!", "Successfully", JOptionPane.INFORMATION_MESSAGE);

        // TODO add your handling code here:
    }//GEN-LAST:event_btnDonateCountryActionPerformed

    private void cbxCountryCountryActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cbxCountryCountryActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_cbxCountryCountryActionPerformed

    private void cbxDistrictDistrictActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cbxDistrictDistrictActionPerformed

        // TODO add your handling code here:
    }//GEN-LAST:event_cbxDistrictDistrictActionPerformed

    private void btnDonateDistrictActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnDonateDistrictActionPerformed
        Double quantityDistrict = Double.parseDouble(txtDistrictQuantity.getText());
        District district=(District)cbxDistrictDistrict.getSelectedItem();
        
        if(district.getMoney()==null){
        district.setMoney(quantityDistrict);
        }else{
        district.setMoney(district.getMoney()+quantityDistrict);
        }
        
        WorkRequest workRequest = new WorkRequest();
        workRequest.setSender(account);
        if(workRequest.getMoney()==null){
        workRequest.setMoney(quantityDistrict);
        }
        workRequest.setDestination(((District) cbxDistrictDistrict.getSelectedItem()).getName());
        system.getWorkQueue().getWorkRequestList().add(workRequest);

        JOptionPane.showMessageDialog(null, "Donate To District Successfully!", "Successfully", JOptionPane.INFORMATION_MESSAGE);        // TODO add your handling code here:
    }//GEN-LAST:event_btnDonateDistrictActionPerformed

    private void cbxDistrictCountryActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cbxDistrictCountryActionPerformed
        Country country = (Country) cbxCountryCountry.getSelectedItem();
        if (country != null) {
            populateCbxDistrict(country);
        }        // TODO add your handling code here:
    }//GEN-LAST:event_cbxDistrictCountryActionPerformed

    private void txtCountryQuantityActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtCountryQuantityActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtCountryQuantityActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnDonateCountry;
    private javax.swing.JButton btnDonateDistrict;
    private javax.swing.JComboBox cbxCountryCountry;
    private javax.swing.JComboBox cbxDistrictCountry;
    private javax.swing.JComboBox cbxDistrictDistrict;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel lblAccountName;
    private javax.swing.JLabel lblCountry;
    private javax.swing.JLabel lblCountry1;
    private javax.swing.JLabel lblDonor;
    private javax.swing.JLabel lblDonorName;
    private javax.swing.JTextField txtCountryQuantity;
    private javax.swing.JTextField txtDistrictQuantity;
    // End of variables declaration//GEN-END:variables
}
